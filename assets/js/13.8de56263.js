(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{377:function(n,t,e){"use strict";e.r(t);var o=e(44),a=Object(o.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"命令模式的撤销操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令模式的撤销操作"}},[n._v("#")]),n._v(" 命令模式的撤销操作")]),n._v(" "),e("p",[n._v("撤销操作的实现一般是给命令对象增加一个名为"),e("code",[n._v("unexecude")]),n._v("或者"),e("code",[n._v("undo")]),n._v("的方法，在该方法里执行execute的反向操作，代码如下：")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("var MoveCommand = function (receiver,pos) {\n\tthis.receiver = receiver;\n\tthis.pos = pos;\n\tthis.oldPos = null;\n};\nMoveCommand.prototype.execute = function () {\n\tthis.receiver.start('left',this.pos,1000,'strongEaseOut');\n\tthis.oldPos = this.receiver.dom.getBoundingClienRect()[this.receiver.propertyName];//记录初始位置\n};\nMoverCommand.prototype.undo = function () {\n\tthis.receiver.start('left',this.oldPos,1000,'strongEaseOut');\n\t//撤销操作，回到之前运动的位置\n};\nvar moveCommand;\nmoveBtn.onclick = function() {\n\tvar animate = new Animate(ball);\n\tmoveCommand = new MoveCommand(animate,pos.value);\n\tmoveCommand.execute();\n};\ncancelBtn.onclick = function () {\n\tmoveCommand.undo();\n}\n")])])]),e("h1",{attrs:{id:"撤销和重做"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#撤销和重做"}},[n._v("#")]),n._v(" 撤销和重做")]),n._v(" "),e("p",[n._v("下面代码将讲述如何撤销一系列的命令")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('var Ryu = {\n\tattack :function () {\n\t\tconsole.log(\'攻击\')\n\t},\n\tdefense:function() {\n\t\tconsole.log(\'防御\')\n\t},\n\tjump:function() {\n\t\tconosle.log(\'跳跃\')\n\t},\n\tcrouch:function () {\n\t\tconsole.log(\'蹲下\')\n\t}\n};\n\nvar makeCommand = function (receiver,state) {\n\treturn function () {\n\t\treceiver[state]();\n\t}\n};\nvar commands = {\n\t"119":"jump",\n\t"115":"crouch",\n\t"97":"defense",\n\t"100":"attack"\n};\nvar commandStack = [];\ndoccument.onkeypress = function (ev) {\n\tvar keyCode = ev.keyCode,\n\t\tcommand = makCommand(Ryu,commands[keyCode]);\n\tif(command) {\n\t\tcammand();\n\t\tcommandStack.push(command);//保存刚才执行的动作\n\t}\n};\n//撤销的操作\ndocument.getElementById(\'replay\').onclick = function () {\n\tvar command;\n\twhile(command = commandStack.shift()) {\n\t\tcommand();\n\t}\n}\n')])])])])}),[],!1,null,null,null);t.default=a.exports}}]);